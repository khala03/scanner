'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,h){a!=Array.prototype&&a!=Object.prototype&&(a[b]=h.value)};
$jscomp.polyfill=function(a,b,h,p){if(b){h=$jscomp.global;a=a.split(".");for(p=0;p<a.length-1;p++){var m=a[p];m in h||(h[m]={});h=h[m]}a=a[a.length-1];p=h[a];b=b(p);b!=p&&null!=b&&$jscomp.defineProperty(h,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function h(a){return a instanceof m?a:new m(function(b,u){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var p=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){p(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var h=a[b];a[b]=null;try{h()}catch(D){this.asyncThrow_(D)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var m=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(z){b.reject(z)}};m.prototype.createResolveAndReject_=function(){function a(a){return function(u){h||(h=!0,a.call(b,u))}}var b=this,h=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};m.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof m)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};m.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(z){this.reject_(z);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};m.prototype.reject_=function(a){this.settle_(2,a)};m.prototype.fulfill_=function(a){this.settle_(1,a)};m.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};m.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)w.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var w=new b;m.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};m.prototype.settleSameAsThenable_=function(a,b){var h=this.createResolveAndReject_();try{a.call(b,h.resolve,h.reject)}catch(D){h.reject(D)}};m.prototype.then=function(a,b){function h(a,b){return"function"==typeof a?function(b){try{p(a(b))}catch(R){u(R)}}:b}var p,u,w=new m(function(a,b){p=a;u=b});this.callWhenSettled_(h(a,p),h(b,u));return w};
m.prototype.catch=function(a){return this.then(void 0,a)};m.prototype.callWhenSettled_=function(a,b){function h(){switch(p.state_){case 1:a(p.result_);break;case 2:b(p.result_);break;default:throw Error("Unexpected state: "+p.state_);}}var p=this;null==this.onSettledCallbacks_?w.asyncExecute(h):this.onSettledCallbacks_.push(h)};m.resolve=h;m.reject=function(a){return new m(function(b,h){h(a)})};m.race=function(a){return new m(function(b,p){for(var m=$jscomp.makeIterator(a),u=m.next();!u.done;u=m.next())h(u.value).callWhenSettled_(b,
p)})};m.all=function(a){var b=$jscomp.makeIterator(a),p=b.next();return p.done?h([]):new m(function(a,m){function u(b){return function(h){w[b]=h;z--;0==z&&a(w)}}var w=[],z=0;do w.push(void 0),z++,h(p.value).callWhenSettled_(u(w.length-1),m),p=b.next();while(!p.done)})};return m},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(h){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(h||"")+"_"+b++,h)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(h){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var h=a.next();$jscomp.generator.ensureIteratorResultIsObject_(h);if(h.done)this.yieldResult=h.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(h.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,h){h?this.finallyContexts_[h]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,h){try{var p=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(p);if(!p.done)return this.context_.stop_(),p;var m=p.value}catch(w){return this.context_.yieldAllIterator_=null,this.context_.throw_(w),this.nextStep_()}this.context_.yieldAllIterator_=null;h.call(this.context_,m);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function h(b){return a.throw(b)}return new Promise(function(p,m){function w(a){a.done?p(a.value):Promise.resolve(a.value).then(b,h).then(w,m)}w(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let b;a&&(b=require("worker_threads"));let h=a?b.parentPort:self,p,m,w,u,ka,z,D,Q,V=!1,G,Y,K=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],R,Z,W,ha,E,ra,sa=Promise.resolve();a||!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?
global:"undefined"!=typeof self?self:this).localforage=a()}(function(){return function ta(a,b,h){function f(e,L){if(!b[e]){if(!a[e]){var v="function"==typeof require&&require;if(!L&&v)return v(e,!0);if(g)return g(e,!0);L=Error("Cannot find module '"+e+"'");throw L.code="MODULE_NOT_FOUND",L;}L=b[e]={exports:{}};a[e][0].call(L.exports,function(b){return f(a[e][1][b]||b)},L,L.exports,ta,a,b,h)}return b[e].exports}for(var g="function"==typeof require&&require,e=0;e<h.length;e++)f(h[e]);return f}({1:[function(a,
b,h){(function(a){function f(){m=!0;for(var a,b,e=x.length;e;){b=x;x=[];for(a=-1;++a<e;)b[a]();e=x.length}m=!1}var g=a.MutationObserver||a.WebKitMutationObserver;if(g){var e=0;g=new g(f);var h=a.document.createTextNode("");g.observe(h,{characterData:!0});var q=function(){h.data=e=++e%2}}else if(a.setImmediate||void 0===a.MessageChannel)q="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){f();
b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(f,0)};else{var p=new a.MessageChannel;p.port1.onmessage=f;q=function(){p.port2.postMessage(0)}}var m,x=[];b.exports=function(a){1!==x.push(a)||m||q()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,h){function f(){}function g(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");
this.state=w;this.queue=[];this.outcome=void 0;a!==f&&p(this,a)}function q(a,b,e){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function e(a,b,e){n(function(){try{var f=b(e)}catch(F){return x.reject(a,F)}f===a?x.reject(a,new TypeError("Cannot resolve promise with itself")):x.resolve(a,f)})}function v(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&
"function"==typeof b)return function(){b.apply(a,arguments)}}function p(a,b){function e(b){g||(g=!0,x.reject(a,b))}function f(b){g||(g=!0,x.resolve(a,b))}var g=!1,h=m(function(){b(f,e)});"error"===h.status&&e(h.value)}function m(a,b){var e={};try{e.value=a(b),e.status="success"}catch(Ba){e.status="error",e.value=Ba}return e}var n=a(1),x={},t=["REJECTED"],u=["FULFILLED"],w=["PENDING"];b.exports=g;g.prototype.catch=function(a){return this.then(null,a)};g.prototype.then=function(a,b){if("function"!=
typeof a&&this.state===u||"function"!=typeof b&&this.state===t)return this;var g=new this.constructor(f);this.state!==w?e(g,this.state===u?a:b,this.outcome):this.queue.push(new q(g,a,b));return g};q.prototype.callFulfilled=function(a){x.resolve(this.promise,a)};q.prototype.otherCallFulfilled=function(a){e(this.promise,this.onFulfilled,a)};q.prototype.callRejected=function(a){x.reject(this.promise,a)};q.prototype.otherCallRejected=function(a){e(this.promise,this.onRejected,a)};x.resolve=function(a,
b){var e=m(v,b);if("error"===e.status)return x.reject(a,e.value);if(e=e.value)p(a,e);else{a.state=u;a.outcome=b;e=-1;for(var g=a.queue.length;++e<g;)a.queue[e].callFulfilled(b)}return a};x.reject=function(a,b){a.state=t;a.outcome=b;for(var e=-1,g=a.queue.length;++e<g;)a.queue[e].callRejected(b);return a};g.resolve=function(a){return a instanceof this?a:x.resolve(new this(f),a)};g.reject=function(a){var b=new this(f);return x.reject(b,a)};g.all=function(a){function b(a,b){e.resolve(a).then(function(a){v[b]=
a;++q!==g||h||(h=!0,x.resolve(m,v))},function(a){h||(h=!0,x.reject(m,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var g=a.length,h=!1;if(!g)return this.resolve([]);for(var v=Array(g),q=0,p=-1,m=new this(f);++p<g;)b(a[p],p);return m};g.race=function(a){function b(a){e.resolve(a).then(function(a){h||(h=!0,x.resolve(q,a))},function(a){h||(h=!0,x.reject(q,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));
var g=a.length,h=!1;if(!g)return this.resolve([]);for(var v=-1,q=new this(f);++v<g;)b(a[v]);return q}},{1:1}],3:[function(a,b,h){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,h){function g(c,a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(y){if("TypeError"!==y.name)throw y;for(var d=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)d.append(c[b]);return d.getBlob(a.type)}}function f(c,a){a&&c.then(function(c){a(null,c)},function(c){a(c)})}function q(c,a,k){"function"==typeof a&&c.then(a);"function"==typeof k&&c.catch(k)}function e(c){return"string"!=typeof c&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function v(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-
1]}function p(c){return(new r(function(a){var d=c.transaction(P,ma),b=g([""]);d.objectStore(P).put(b,"key");d.onabort=function(c){c.preventDefault();c.stopPropagation();a(!1)};d.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);a(d||!c||43<=parseInt(c[1],10))}})).catch(function(){return!1})}function m(c){return"boolean"==typeof R?r.resolve(R):p(c).then(function(c){return R=c})}function n(c){c=I[c.name];var a={};a.promise=new r(function(c,
d){a.resolve=c;a.reject=d});c.deferredOperations.push(a);c.dbReady?c.dbReady=c.dbReady.then(function(){return a.promise}):c.dbReady=a.promise}function x(c){if(c=I[c.name].deferredOperations.pop())return c.resolve(),c.promise}function t(c,a){if(c=I[c.name].deferredOperations.pop())return c.reject(a),c.promise}function u(c,a){return new r(function(d,b){if(I[c.name]=I[c.name]||C(),c.db){if(!a)return d(c.db);n(c);c.db.close()}var k=[c.name];a&&k.push(c.version);var l=J.open.apply(J,k);a&&(l.onupgradeneeded=
function(a){var d=l.result;try{d.createObjectStore(c.storeName),1>=a.oldVersion&&d.createObjectStore(P)}catch(N){if("ConstraintError"!==N.name)throw N;console.warn('The database "'+c.name+'" has been upgraded from version '+a.oldVersion+" to version "+a.newVersion+', but the storage "'+c.storeName+'" already exists.')}});l.onerror=function(a){a.preventDefault();b(l.error)};l.onsuccess=function(){d(l.result);x(c)}})}function w(a,d){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),
b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==d&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1}function z(a){return new r(function(c,k){var d=new FileReader;d.onerror=k;d.onloadend=function(d){d=btoa(d.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})};d.readAsBinaryString(a)})}function A(a){for(var c=
atob(a.data),k=c.length,b=new ArrayBuffer(k),y=new Uint8Array(b),l=0;l<k;l++)y[l]=c.charCodeAt(l);return g([b],{type:a.type})}function B(a){var c=this,k=c._initReady().then(function(){var a=I[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return q(k,a,a),k}function D(a){n(a);for(var c=I[a.name],k=c.forages,b=0;b<k.length;b++){var y=k[b];y._dbInfo.db&&(y._dbInfo.db.close(),y._dbInfo.db=null)}return a.db=null,u(a,!1).then(function(c){return a.db=c,w(a)?u(a,!0):c}).then(function(d){a.db=c.db=d;for(var b=
0;b<k.length;b++)k[b]._dbInfo.db=d}).catch(function(c){throw t(a,c),c;})}function F(a,d,k,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,d);k(null,c)}catch(l){if(0<b&&(!a.db||"InvalidStateError"===l.name||"NotFoundError"===l.name))return r.resolve().then(function(){if(!a.db||"NotFoundError"===l.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),u(a,!0)}).then(function(){return D(a).then(function(){F(a,d,k,b-1)})}).catch(k);
k(l)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(a){var c=.75*a.length;var k=a.length,b=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var e=new ArrayBuffer(c),l=new Uint8Array(e);for(c=0;c<k;c+=4){var f=T.indexOf(a[c]);var g=T.indexOf(a[c+1]);var N=T.indexOf(a[c+2]);var h=T.indexOf(a[c+3]);l[b++]=f<<2|g>>4;l[b++]=(15&g)<<4|N>>2;l[b++]=(3&N)<<6|63&h}return e}function E(a){var c=new Uint8Array(a),k="";for(a=0;a<c.length;a+=3)k+=T[c[a]>>2],k+=T[(3&c[a])<<
4|c[a+1]>>4],k+=T[(15&c[a+1])<<2|c[a+2]>>6],k+=T[63&c[a+2]];return 2==c.length%3?k=k.substring(0,k.length-1)+"=":1==c.length%3&&(k=k.substring(0,k.length-2)+"=="),k}function H(a,d,k,b){a.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,b)}function S(a,d,k,b,e,l){a.executeSql(k,b,e,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[d.storeName],function(a,la){la.rows.length?l(a,c):
H(a,d,function(){a.executeSql(k,b,e,l)},l)},l):l(a,c)},l)}function K(a,b,k,la){var c=this;a=e(a);var d=new r(function(d,l){c.ready().then(function(){void 0===b&&(b=null);var e=b,y=c._dbInfo;y.serializer.serialize(b,function(b,f){f?l(f):y.db.transaction(function(c){S(c,y,"INSERT OR REPLACE INTO "+y.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){d(e)},function(a,c){l(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<la)return void d(K.apply(c,[a,e,k,la-1]));l(b)}})})}).catch(l)});return f(d,
k),d}function Q(a){return new r(function(c,b){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,d){b=[];for(var k=0;k<d.rows.length;k++)b.push(d.rows.item(k).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function O(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function U(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,
c)})}}function M(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var k in b)b.hasOwnProperty(k)&&(da(b[k])?arguments[0][k]=b[k].slice():arguments[0][k]=b[k])}return arguments[0]}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},J=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;
if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof Promise&&a(3);var r=Promise,P="local-forage-detect-blob-support",R=void 0,I={},ea=Object.prototype.toString,ma="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function c(){return r.resolve()}var b=this,e={db:null};if(a)for(var y in a)e[y]=a[y];var l=I[e.name];l||(l=C(),I[e.name]=l);l.forages.push(b);
b._initReady||(b._initReady=b.ready,b.ready=B);a=[];for(y=0;y<l.forages.length;y++){var f=l.forages[y];f!==b&&a.push(f._initReady().catch(c))}var g=l.forages.slice(0);return r.all(a).then(function(){return e.db=l.db,u(e,!1)}).then(function(a){return e.db=a,w(e,b._defaultConfig.version)?u(e,!0):a}).then(function(a){e.db=l.db=a;b._dbInfo=e;for(a=0;a<g.length;a++){var c=g[a];c!==b&&(c._dbInfo.db=e.db,c._dbInfo.version=e.version)}})},_support:function(){try{if(!J)return!1;var a="undefined"!=typeof openDatabase&&
/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(k){return!1}}(),iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){F(c._dbInfo,"readonly",function(k,e){if(k)return d(k);try{var l=e.objectStore(c._dbInfo.storeName).openCursor(),f=1;
l.onsuccess=function(){var c=l.result;if(c){var d=c.value;d&&d.__local_forage_encoded_blob&&(d=A(d));d=a(d,c.key,f++);void 0!==d?b(d):c.continue()}else b()};l.onerror=function(){d(l.error)}}catch(pa){d(pa)}})}).catch(d)});return f(d,b),d},getItem:function(a,b){var c=this;a=e(a);var d=new r(function(b,d){c.ready().then(function(){F(c._dbInfo,"readonly",function(k,e){if(k)return d(k);try{var l=e.objectStore(c._dbInfo.storeName).get(a);l.onsuccess=function(){var a=l.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&
(a=A(a));b(a)};l.onerror=function(){d(l.error)}}catch(ia){d(ia)}})}).catch(d)});return f(d,b),d},setItem:function(a,b,k){var c=this;a=e(a);var d=new r(function(d,k){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===ea.call(b)?m(e.db).then(function(a){return a?b:z(b)}):b}).then(function(b){F(c._dbInfo,ma,function(e,l){if(e)return k(e);try{var f=l.objectStore(c._dbInfo.storeName);null===b&&(b=void 0);var y=f.put(b,a);l.oncomplete=function(){void 0===b&&(b=null);d(b)};l.onabort=l.onerror=
function(){k(y.error?y.error:y.transaction.error)}}catch(qa){k(qa)}})}).catch(k)});return f(d,k),d},removeItem:function(a,b){var c=this;a=e(a);var d=new r(function(b,d){c.ready().then(function(){F(c._dbInfo,ma,function(k,e){if(k)return d(k);try{var l=e.objectStore(c._dbInfo.storeName).delete(a);e.oncomplete=function(){b()};e.onerror=function(){d(l.error)};e.onabort=function(){d(l.error?l.error:l.transaction.error)}}catch(ia){d(ia)}})}).catch(d)});return f(d,b),d},clear:function(a){var c=this,b=new r(function(a,
b){c.ready().then(function(){F(c._dbInfo,ma,function(d,k){if(d)return b(d);try{var e=k.objectStore(c._dbInfo.storeName).clear();k.oncomplete=function(){a()};k.onabort=k.onerror=function(){b(e.error?e.error:e.transaction.error)}}catch(N){b(N)}})}).catch(b)});return f(b,a),b},length:function(a){var c=this,b=new r(function(a,b){c.ready().then(function(){F(c._dbInfo,"readonly",function(d,k){if(d)return b(d);try{var e=k.objectStore(c._dbInfo.storeName).count();e.onsuccess=function(){a(e.result)};e.onerror=
function(){b(e.error)}}catch(N){b(N)}})}).catch(b)});return f(b,a),b},key:function(a,b){var c=this,d=new r(function(b,d){if(0>a)return void b(null);c.ready().then(function(){F(c._dbInfo,"readonly",function(k,e){if(k)return d(k);try{var l=!1,f=e.objectStore(c._dbInfo.storeName).openCursor();f.onsuccess=function(){var c=f.result;if(!c)return void b(null);0===a?b(c.key):l?b(c.key):(l=!0,c.advance(a))};f.onerror=function(){d(f.error)}}catch(pa){d(pa)}})}).catch(d)});return f(d,b),d},keys:function(a){var c=
this,b=new r(function(a,b){c.ready().then(function(){F(c._dbInfo,"readonly",function(d,k){if(d)return b(d);try{var e=k.objectStore(c._dbInfo.storeName).openCursor(),l=[];e.onsuccess=function(){var c=e.result;if(!c)return void a(l);l.push(c.key);c.continue()};e.onerror=function(){b(e.error)}}catch(ia){b(ia)}})}).catch(b)});return f(b,a),b},dropInstance:function(a,b){b=v.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);
a.name?(c=a.name===c.name&&this._dbInfo.db?r.resolve(this._dbInfo.db):u(a,!1).then(function(b){var c=I[a.name],d=c.forages;c.db=b;for(c=0;c<d.length;c++)d[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;n(a);var d=I[a.name],k=d.forages;b.close();for(b=0;b<k.length;b++){var e=k[b];e._dbInfo.db=null;e._dbInfo.version=c}return(new r(function(b,d){var k=J.open(a.name,c);k.onerror=function(a){k.result.close();d(a)};k.onupgradeneeded=
function(){k.result.deleteObjectStore(a.storeName)};k.onsuccess=function(){var a=k.result;a.close();b(a)}})).then(function(a){d.db=a;for(var b=0;b<k.length;b++){var c=k[b];c._dbInfo.db=a;x(c._dbInfo)}}).catch(function(b){throw(t(a,b)||r.resolve()).catch(function(){}),b;})}}):c.then(function(b){n(a);var c=I[a.name],d=c.forages;b.close();for(b=0;b<d.length;b++)d[b]._dbInfo.db=null;return(new r(function(b,c){var d=J.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=d.result;b&&b.close();
c(a)};d.onsuccess=function(){var a=d.result;a&&a.close();b(a)}})).then(function(a){c.db=a;for(a=0;a<d.length;a++)x(d[a]._dbInfo)}).catch(function(b){throw(t(a,b)||r.resolve()).catch(function(){}),b;})})):c=r.reject("Invalid arguments");return f(c,b),c}};var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y=/^~~local_forage_type~([^~]+)~/,Z=Object.prototype.toString,W={serialize:function(a,b){var c="";if(a&&(c=Z.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===
Z.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+="arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(Error("Failed to get type for BinaryArray")));b(e+E(d))}else if("[object Blob]"===
c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+"~"+E(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(l){console.error("Couldn't convert value into a JSON string: ",a),b(null,l)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&Y.test(b)){var c=b.match(Y);var e=c[1];b=b.substring(c[0].length)}b=G(b);switch(a){case "arbf":return b;case "blob":return g([b],
{type:e});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:G,bufferToString:E};h={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};
if(a)for(var e in a)c[e]="string"!=typeof a[e]?a[e].toString():a[e];a=new r(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(ua){return d(ua)}c.db.transaction(function(e){H(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=W,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){S(c,e,"SELECT * FROM "+e.storeName,[],
function(c,d){c=d.rows;d=c.length;for(var k=0;k<d;k++){var f=c.item(k),l=f.value;if(l&&(l=e.serializer.deserialize(l)),void 0!==(l=a(l,f.key,k+1)))return void b(l)}b()},function(a,b){d(b)})})}).catch(d)});return f(d,b),d},getItem:function(a,b){var c=this;a=e(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){S(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));
b(a)},function(a,b){d(b)})})}).catch(d)});return f(d,b),d},setItem:function(a,b,e){return K.apply(this,[a,b,e,1])},removeItem:function(a,b){var c=this;a=e(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){S(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return f(d,b),d},clear:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){S(b,
d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return f(c,a),c},length:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){S(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return f(c,a),c},key:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){S(c,e,"SELECT key FROM "+
e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return f(d,b),d},keys:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){S(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return f(c,a),c},dropInstance:function(a,b){b=v.apply(this,arguments);
var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new r(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:Q(d))})).then(function(a){return new r(function(b,c){a.db.transaction(function(d){function e(a){return new r(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var k=[],f=0,g=a.storeNames.length;f<
g;f++)k.push(e(a.storeNames[f]));r.all(k).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):r.reject("Invalid arguments"),f(d,b),d}};try{var ba="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){ba=!1}var ha=function(a,b){for(var c=a.length,d=0;d<c;){var e=a[d],f=b;if(e===f||"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))return!0;d++}return!1},da=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},
ja={},fa={},ca={INDEXEDDB:a,WEBSQL:h,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=O(a,this._defaultConfig);try{var e=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(y){e=!0}return!e||0<localStorage.length?(this._dbInfo=b,b.serializer=W,r.resolve()):r.reject()},_support:ba,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,
e=d.length,k=localStorage.length,f=1,g=0;g<k;g++){var h=localStorage.key(g);if(0===h.indexOf(d)){var q=localStorage.getItem(h);if(q&&(q=b.serializer.deserialize(q)),void 0!==(q=a(q,h.substring(e),f++)))return q}}});return f(d,b),d},getItem:function(a,b){var c=this;a=e(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return f(d,b),d},setItem:function(a,b,k){var c=this;a=e(a);var d=c.ready().then(function(){void 0===
b&&(b=null);var d=b;return new r(function(e,k){var f=c._dbInfo;f.serializer.serialize(b,function(b,c){if(c)k(c);else try{localStorage.setItem(f.keyPrefix+a,b),e(d)}catch(na){"QuotaExceededError"!==na.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==na.name||k(na),k(na)}})})});return f(d,k),d},removeItem:function(a,b){var c=this;a=e(a);var d=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return f(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,
c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return f(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return f(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(ua){d=null}return d&&(d=d.substring(b.keyPrefix.length)),d});return f(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=
[],e=0;e<c;e++){var f=localStorage.key(e);0===f.indexOf(a.keyPrefix)&&d.push(f.substring(a.keyPrefix.length))}return d});return f(c,a),c},dropInstance:function(a,b){if(b=v.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?(new r(function(b){b(a.storeName?O(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&
localStorage.removeItem(c)}}):r.reject("Invalid arguments"),f(d,b),d}}};ba=[ca.INDEXEDDB._driver,ca.WEBSQL._driver,ca.LOCALSTORAGE._driver];var oa=["dropInstance"],X="clear getItem iterate key keys length removeItem setItem".split(" ").concat(oa),ka={description:"",driver:ba.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};ba=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in ca)if(ca.hasOwnProperty(c)){var d=
ca[c],e=d._driver;this[c]=e;ja[e]||this.defineDriver(d)}this._defaultConfig=M({},ka);this._config=M({},this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":V(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,
"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var e=new r(function(b,c){try{var e=a._driver,d=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(d);for(var k=X.concat("_initStorage"),g=0,h=k.length;g<
h;g++){var l=k[g];if((!ha(oa,l)||a[l])&&"function"!=typeof a[l])return void c(d)}(function(){for(var b=function(a){return function(){var b=r.reject(Error("Method "+a+" is not implemented by the current driver"));return f(b,arguments[arguments.length-1]),b}},c=0,e=oa.length;c<e;c++){var d=oa[c];a[d]||(a[d]=b(d))}})();d=function(c){ja[e]&&console.info("Redefining LocalForage driver: "+e);ja[e]=a;fa[e]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(d,c):d(!!a._support):
d(!0)}catch(qa){c(qa)}});return q(e,b,c),e},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){a=ja[a]?r.resolve(ja[a]):r.reject(Error("Driver not found."));return q(a,b,c),a},a.prototype.getSerializer=function(a){var b=r.resolve(W);return q(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return q(c,a,a),c},a.prototype.setDriver=function(a,b,c){function e(){g._config.driver=
g.driver()}function d(a){return g._extend(a),e(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(d).catch(b)}e();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}var c=0;return b()}}var g=this;da(a)||(a=[a]);var k=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return r.resolve()}):
r.resolve()).then(function(){var a=k[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver;e();g._wrapLibraryMethodsWithReady();g._initDriver=f(k)})}).catch(function(){e();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}),q(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!fa[a]},a.prototype._extend=function(a){M(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,e=a.length;c<
e;c++){var d=a[c];this.supports(d)&&b.push(d)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=X.length;a<b;a++)U(this,X[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=ba},{3:3}]},{},[4])(4)});let J,H,O,da=0,U=new Map;Date.prototype.kUtilFormat=function(a){var b={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+
3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in b)(new RegExp("("+f+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[f]:("000"+b[f]).substr(("000"+b[f]).length-RegExp.$1.length)));return a};let M,t=a=>a.join(""),n={a:[80,88,27,82,145,164,199,211],b:[187,87,89,128,150,44,190,213],c:[89,51,74,53,99,72,82,118],d:[99,181,118,158,215,103,76,117],e:[99,51,86,105,100,71,120,108],f:[97,87,49,119,98,51,
74,48,83,50,86,53],g:[81,85,86,84,76,85,100,68,84,81,32,32],h:[90,87,53,106,99,110,108,119,100,65,32,32],i:[90,71,86,106,99,110,108,119,100,65,32,32],j:[97,88,89,32],k:[29,83,122,137,5,180,157,114],l:[100,71,70,110,84,71,86,117,90,51,82,111]},va=()=>self[t(n.c)][t(n.e)][t(n.f)]("raw",new Uint8Array(n.a.concat(n.b,n.d,n.k)),t(n.g),!0,[t(n.h),t(n.i)]),wa=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[t(n.c)]&&self[t(n.c)][t(n.e)]&&self[t(n.c)][t(n.e)][t(n.f)]){var b=atob(a),f=new Uint8Array(b.length);
for(let a=0;a<b.length;++a)f[a]=b.charCodeAt(a);b=f.subarray(0,12);f=f.subarray(b.length);M||(M=yield va());f=yield self[t(n.c)][t(n.e)][t(n.i)]({name:t(n.g),[t(n.j)]:b,[t(n.l)]:128},M,f);return String.fromCharCode.apply(null,new Uint8Array(f))}return yield new Promise((b,f)=>{let g=da++;U.set(g,a=>{if(a.success)return p&&C(a.txt),b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return f(b)}});h.postMessage({type:"taskd",taskID:g,txt:a,d:n})})}),ea=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[t(n.c)]&&
self[t(n.c)][t(n.e)]&&self[t(n.c)][t(n.e)][t(n.f)]){var b=new Uint8Array(a.length);for(var f=0;f<a.length;++f)b[f]=a.charCodeAt(f);f=self.crypto.getRandomValues(new Uint8Array(12));M||(M=yield va());b=yield self[t(n.c)][t(n.e)][t(n.h)]({name:t(n.g),[t(n.j)]:f,[t(n.l)]:128},M,b);b=new Uint8Array(b);let g=new Uint8Array(f.length+b.length);g.set(f);g.set(b,f.length);return btoa(String.fromCharCode.apply(null,g))}return yield new Promise((b,f)=>{let g=da++;U.set(g,a=>{if(a.success)return p&&C(a.txt),
b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return f(b)}});h.postMessage({type:"taske",taskID:g,txt:a,d:n})})}),xa=()=>{let a=new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let f=0;36>f;++f){let g=a[f]%36;b=10>g?b+g:b+String.fromCharCode(g+87)}return b},P=0;const Ca=(a,b,f)=>{a*=b;0<a&&(P&&Module._free(P),P=Module._malloc(a));Module.HEAPU8.set(f,P)};(a?global:self).DBRModule=(a?global:self).Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?m+"dbr-"+
w+".node.wasm":m+"dbr-"+w+(V?".full":"")+".wasm":m+b},print:a=>{C(a)},printErr:a=>{console.error(a);C(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){C("wasm initialized, cost "+(Date.now()-R)+" ms");var b={pk:u,dm:Q,ls:K[0]};z&&(b.hs=z);Y&&(b.fn=Y);p&&(b.bd=!0);if(ka){yield ra;b.cu=G;p&&C(G);p&&C(D);if(D instanceof Error){b=D;h.postMessage({type:"load",success:!1,message:b.message,stack:p?b.stack:null});C(b.message);return}try{let a=JSON.parse(yield wa(D));
a.ba&&(b.ba=a.ba);a.usu&&(b.usu=a.usu);b.ar=a.in}catch(g){}}p&&C(b);a||(Module=DBRModule);try{Module.BarcodeReaderWasm.init(JSON.stringify(b))}catch(g){}h.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion()})})}};let A=new Map,Da=0;h.onmessage=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var g=b.data?b.data:b,f=g.id,q=g.instanceID;const n=g.body;switch(g.type){case "loadWasm":p=g.bd;m=g.engineResourcePath;w=g.version;u=g.pk;Q=g.dm;V=g.bUseFullFeature;
Y=g.deviceFriendlyName;g.ls&&K.unshift(...g.ls);Z=g.sp;W=g.lm;ha=g.cw;C("wasm loading...");R=Date.now();if(a){f=Module;Module=require("./dbr-"+w+".node.wasm.js");for(let a in f)Module[a]=f[a]}else importScripts(m+"dbr-"+w+(V?".full":"")+".wasm.js");if(ka=8==u.length||8<u.length&&!u.startsWith("t")&&!u.startsWith("f")&&!u.startsWith("P")&&!u.startsWith("L")){z=u;u="";let b=w.split(".")[0];ra=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){t=a=>atob(String.fromCharCode.apply(null,a).replace(/\n/g,
"+").replace(/\s/g,"="));try{yield(yield localforage.createInstance({name:"dbrjshello"})).setItem("dbrjshello","available")}catch(aa){localforage=function(a){this.dbname=a};localforage.createInstance=function(a){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return new localforage(a.name)})};let a=a=>function(){let b=[];for(let a=0;a<arguments.length;++a)b.push(arguments[a]);return new Promise((e,f)=>{let g=da++;U.set(g,a=>{if(a.success)return p&&C(a.result),e(a.result);{let b=Error(a.message);
b.stack+="\n"+a.stack;return f(b)}});h.postMessage({type:"localforage",taskID:g,dbname:this.dbname,method:a,paras:b})})};localforage.prototype.setItem=a("setItem");localforage.prototype.getItem=a("getItem");localforage.prototype.removeItem=a("removeItem");localforage.prototype.keys=a("keys")}H=yield localforage.createInstance({name:"dynamltsinfo"});O=btoa(String.fromCharCode(z.charCodeAt(Q.length/2)+1)+String.fromCharCode(z.charCodeAt(2*Q.length/3)+7)+btoa(Q)+b);let e=btoa(String.fromCharCode(z.charCodeAt(0)+
10)+btoa(z)+b);try{let a=yield H.getItem(O);a&&([G,E]=JSON.parse(yield wa(a)))}catch(aa){}try{null==G&&(G=xa())}catch(aa){}J=yield localforage.createInstance({name:"dynamltsuns"+btoa("dbr"+String.fromCharCode(z.charCodeAt(0)+10)+btoa(z))});try{D=yield H.getItem(e)}catch(aa){}try{let f={hs:z,pd:"dbr",vm:b,dt:a?"server":"browser",ed:"javascript",cu:G,ad:Q},g={};E&&(g["lts-time"]=E);Z&&(f.sp=Z);W&&(f.lm=W);ha&&(f.cw=ha);D=yield Promise.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=
(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");E&&(H.setItem(O,yield ea(JSON.stringify([G,a]))),E=a);let b;var h="auth/?ext="+encodeURIComponent(btoa(JSON.stringify(f)));let v=!1,n=!1,p,q,m=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&!a.ok)try{let b=yield a.text();if(b){p=b;let a=JSON.parse(b);a.errorCode&&(q=a,100<a.errorCode&&200>a.errorCode&&(n=v=!0))}}catch(Fa){}});try{b=yield fetch(K[0]+h,{headers:g}),yield m(b)}catch(F){}if(!(E||b&&b.ok||v))try{b=yield fetch(K[1]+h,
{headers:g}),yield m(b)}catch(F){}if(!(E||b&&b.ok||v))try{b=yield fetch(K[0]+h,{headers:g}),yield m(b)}catch(F){}let t=()=>{if(!b||!b.ok){n&&H.setItem(e,"").catch(a=>{});let a="Auth failed. ";a=q?a+("Error Code: "+q.errorCode+", message: "+q.message):a+p;throw Error(a);}};t();h=yield b.text();h||(H.removeItem(O),H.removeItem(e),G=xa(),f.cu=G,E=void 0,h=encodeURIComponent(btoa(JSON.stringify(f))),b=yield fetch(K[0]+"auth/?ext="+h,{headers:g}),yield m(b),t(),h=yield b.text());try{E||(H.setItem(O,yield ea(JSON.stringify([G,
a]))),E=a),H.setItem(e,h).catch(a=>{})}catch(F){}return h}))(),new Promise((a,b)=>{setTimeout(()=>b(Error("Network Error. Request timeout.")),D?3E3:3E4)})]);fa(null,!0)}catch(aa){p&&console.error(aa),D||(D=aa)}}))()}break;case "createInstance":q=Da++;try{let b=new Module.BarcodeReaderWasm(g.bScanner,q);A.set(q,b);let f=JSON.parse(b.getRuntimeSettings());g.bScanner?(f.localizationModes=[2,0,0,0,0,0,0,0],f.deblurLevel=0):(f.expectedBarcodesCount=512,f.scaleDownThreshold=1E5,f.timeout=1E5);a||V||(f.barcodeFormatIds=
234883071);b.updateRuntimeSettings(JSON.stringify(f))}catch(e){B(e,f);break}h.postMessage({type:"task",id:f,body:{success:!0,instanceID:q}});break;case "destroy":try{A.get(q).delete(),A.delete(q)}catch(e){B(e,f);break}h.postMessage({type:"task",id:f,body:{success:!0}});break;case "decodeBuffer":{g=p?Date.now():0;let a,b,m,t;try{a=p?Date.now():0,Ca(n.height,n.stride,n.buffer),b=p?Date.now():0,t=JSON.parse(A.get(q).decodeBufferPtr(P,n.width,n.height,n.stride,n.format)),m=p?Date.now():0}catch(Aa){B(Aa,
f);break}h.postMessage({type:"task",id:f,body:{success:!0,decodeReturn:t}});Ea(["timeWorkerGetMsg: "+g,"timeBeforeSendBufferToWasm: "+a+" "+(a-g),"timeBeforeDecode: "+b+" "+(b-a),"timefinishDecode: "+m+" "+(m-b)].join("\n"));break}case "decodeFileInMemory":{let a;try{a=JSON.parse(A.get(q).decodeFileInMemory(n.bytes))}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,decodeReturn:a}});break}case "clearMapDecodeRecord":try{A.get(q).clearMapDecodeRecord()}catch(e){B(e,f);break}h.postMessage({type:"task",
id:f,body:{success:!0}});break;case "getRuntimeSettings":{let a;try{a=A.get(q).getRuntimeSettings()}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(A.get(q).updateRuntimeSettings(n.settings))}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=A.get(q);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?
(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);V||(b.barcodeFormatIds=234883071);a.updateRuntimeSettings(JSON.stringify(b))}catch(e){B(b,f);break}h.postMessage({type:"task",id:f,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=A.get(q).outputSettingsToString()}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;try{a=JSON.parse(A.get(q).initRuntimeSettingsWithString(n.settings))}catch(v){B(v,
f);break}h.postMessage({type:"task",id:f,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=null;try{var L=A.get(q).getIntermediateResults(),za=JSON.parse(L,(b,e)=>"bytes"===b&&"ptr"in e&&"length"in e?a=Module.BarcodeReaderWasm.getBytes(e.ptr,e.length):e)}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,results:za}});A.get(q).freeIntermediateResults();break}case "setModeArgument":{let a;try{a=JSON.parse(A.get(q).setModeArgument(n.modeName,n.index,n.argumentName,
n.argumentValue))}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(A.get(q).getModeArgument(n.modeName,n.index,n.argumentName))}catch(v){B(v,f);break}h.postMessage({type:"task",id:f,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=A.get(q),b=n.settings;a.duplicateForgetTime=b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;
b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(e){B(e,f);break}h.postMessage({type:"task",id:f,body:{success:!0}});break;case "getScanSettings":g={};try{let a=A.get(q);g.duplicateForgetTime=a.duplicateForgetTime;g.oneDRememberFrameCount=a.oneDRememberFrameCount;g.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(g.frameFilter=JSON.parse(b))}catch(e){B(e,f);break}h.postMessage({type:"task",id:f,body:{success:!0,results:g}});break;case "task":f=
g.id;g=g.body;try{U.get(f)(g),U.delete(f)}catch(e){throw U.delete(f),e;}break;default:console.warn("Unmatched task: ",b)}})};if(a)h.on("message",h.onmessage);let C=a=>{h.postMessage({type:"log",message:a})};console.log=C;let Ea=a=>{p&&C(a)},B=(a,b)=>{h.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)},ya=!1,X=null;(a?global:self).scsd=(a,b,f,h)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){b=yield ea(b);try{yield J.setItem(f,
b)}catch(ta){}h&&fa(f);X&&clearTimeout(X);X=setTimeout(()=>{fa()},18E4)});let fa=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){sa=sa.then((a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let g=yield J.keys();b||(ya?a&&(g=g.filter(b=>b<a)):ya=!0);for(let a=0;a<g.length/1E3;++a){let b=g.slice(1E3*a,1E3*a+999);var f=[];for(let a=0;a<b.length;++a)f.push(yield J.getItem(b[a]));let h=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");H.setItem(O,yield ea(JSON.stringify([G,
h])));if((yield fetch(K[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json","lts-time":E}})).ok)for(f=0;f<b.length;++f)yield J.removeItem(b[f])}}catch(q){}}))})})();
